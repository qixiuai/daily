# -*- coding: utf-8 -*-
"""
Created on Wed Aug 29 09:41:09 2018

@author: admin
"""
import requests
import os
from PIL import Image
import shutil
import numpy as np

new_path = r'pictures/'
def getImage(imgUrl):
        r = requests.get(imgUrl, stream=True)
        extension = os.path.splitext(imgUrl)[1] # 获取扩展名
        i = np.random.randint(100000000000)
        imgName = str(i)
        locals()[str(i)]=i
        imgName = imgName.join(["./image",extension])
        print(imgName)
        with open(imgName, 'wb') as f:
            for chunk in r.iter_content(chunk_size=1024):
                if chunk:
                    f.write(chunk)
                    f.flush()
        return imgName

num_pictures_you_want = 2000
if not os.path.exists(new_path):
    os.mkdir(new_path)
for i in range(num_pictures_you_want):    
    imageName = getImage('http://cs.sp.hzcy.com/Customer/Captcha?time=1535453355751')
    shutil.move(imageName, new_path)
    
