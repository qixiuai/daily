#include <iostream>
#include <fstream>
#include <vector>
#include <string>
#include <stdexcept>
#include <chrono>
#include <thread>

#include "BCG.h"

using namespace std;

int main() {
  using namespace AwareTech;
  std::string data_dir  = "/home/guo/AwareCore/Giants/data/";
  std::string test_data = data_dir + "Test.txt";
  //std::string test_data = data_dir + "sleep704.txt";
  std::ifstream data_stream(test_data);

  if (!data_stream.is_open())
    throw std::invalid_argument("Data file not found");
  
  int Fz = 100;
  BCGFramework bcg(Fz);
  cout << "Start running BCG_Framework\n";
  int val;
  while (true) {
    data_stream >> val;
    if (data_stream.eof())
      break;
    auto ret = bcg.run(val);
    cout << ret;
    std::this_thread::sleep_for(std::chrono::seconds(1));
  }
  
  return 0;
}
