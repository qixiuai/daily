
cc_library(
    name = "respiratory_rate",
    srcs =  ["findpeaks.cc", "respiratoryrate_wrapper.cc"],
    hdrs = ["respiratoryrate_wrapper.h", "findpeaks.h"],
    deps = ["//:boost"],
)

cc_binary(
    name = "respiratory_rate.dll",
    srcs = ["findpeaks.cc", "findpeaks.h", "respiratoryrate_wrapper.cc", "respiratoryrate_wrapper.h"],
    deps = ["//:boost",],
    features = ["windows_export_all_symbols"],
    linkshared = 1,
    copts = ["-std=c++17"]
)

cc_binary(
    name = "test_resp",
    srcs = ["test_resp_run.c", "respiratoryrate_wrapper.h"],
    deps = ["//:respiratory_rate"],
)

cc_library(
    name = "boost",
    srcs = glob(["boost/**/*.hpp"]),
)


platform(
    name = 'windows',
    constraint_values = [
      '@bazel_tools//platforms:windows',
      '@bazel_tools//platforms:x86_32',
    ]
)
