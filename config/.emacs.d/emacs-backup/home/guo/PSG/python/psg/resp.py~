from absl import flags
from absl import app
from absl import logging

import pdb

from adappeaks import AdapPeaks

class RespEvent(object):
    """Resp event such as hypopnea """

    def __init__(self, start, end):
        self._start = start
        self._end = end

    @property
    def start(self):
        self._start

    @property
    def end(self):
        self._end

    @property
    def dur(self):
        return self._end - self._start
    

def analysis_hypopnea(resp_pressure, spo2):
    hypopneas = []
    resp_pressure = np.asarray(resp_pressure)
    adapeaks = AdapPeaks(init_thres=0.7, cycle_min=400, cycle_max=3000)
    peaks = adapeaks.findpeaks(resp_pressure)
    peaks_value = resp_pressure[peaks]
    baseline = 
    for peak in peaks:
        pass
    
