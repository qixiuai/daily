
package(
    default_visibility = ["//visibility:public"],
)

licenses(["notice"])

cc_library(
    name = "api",
    srcs = ["api.cc"],
    hdrs = ["api.h"],
    copts = ["-std=c++17"],
    deps =    
       [
           ":data",
           "//psg/event:arousal", "//psg/event:stage", "//psg/event:spo2",
           "//psg/event:leg", "//psg/event:resp", "//psg/event:heart", "//psg/event:pose", 
           "@com_google_absl//absl/strings",
       ],
)

cc_library(
    name = "data",
    srcs = ["data.cc"],
    hdrs = ["data.h"],
    copts = ["-std=c++17"],
    deps = ["//psg/lib:edfplus"],
)

cc_test(
    name = "api_test",
    size = "small",
    srcs = ["api_test.cc",],
    copts = ["-std=c++17", "-Iexternal/gtest/include"],
    linkopts = ["-pthread"],
    deps = [":api", "@com_google_absl//absl/strings", "@gtest//:gtest"],
)

cc_binary(
    name = "stage_test",
    srcs = ["stage_test.cc"],
    deps = ["//psg/event:stage"],
)



