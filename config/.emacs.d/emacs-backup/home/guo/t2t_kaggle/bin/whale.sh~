#!/bin/bash

root_dir=/home/guo/t2t/kaggle/image_whale
data_dir=${root_dir}/t2t_data
model_dir=${root_dir}/t2t_model

usr_dir=/home/guo/t2t_kaggle/kaggle/

model=basic_fc
model_param=shakeshake_small

generate_data=False
fresh_model=True

debug=True

if [ ${fresh_model} ]; then
   rm -rf ${model_dir}
fi

if [ $generate_data == True ]; then
    echo "--------------Generate data----------------"
    rm -rf ${data_dir}
    t2t-trainer \
	--t2t_usr_dir=${usr_dir} \
	--tfdbg=${debug} \
	--problem=image_whale \
	--data_dir=${data_dir} \
	--output_dir=${model_dir} \
	--model=${model} \
	--hparams_set=${model_param} \
	--train_steps=1000000 \
	--eval_steps=300 \
	--generate_data
else
    echo "--------------Not Generate data----------------"
    t2t-trainer \
	--t2t_usr_dir=${usr_dir} \
	--tfdbg=${debug} \
	--problem=image_whale \
	--data_dir=${data_dir} \
	--output_dir=${model_dir} \
	--model=${model} \
	--hparams_set=${model_param} \
	--train_steps=1000000 \
	--eval_steps=300
fi




