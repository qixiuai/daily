#include <iostream>
#include <fstream>
#include <vector>
#include <string>

#include "findpeaks.h"
#include "filter.h"
#include "framework.h"

int Framework::run(int value) {
  value  = this->medfilter.realtime_filter(value);
  value  = this->lowpass.realtime_filter(value);
  int resp_rate = this->resp_detector.run(value);
  return  resp_rate;
}


/*
vector<int> load_signal(std::string file_path) {
  std::fstream in(file_path);
  if (!in.is_open()) {
    std::cout << file_path << " is not found\n";
  }
  std::vector<int> signal;
  std::string line;
  while (getline(in, line)) {
    signal.push_back(std::stoi(line));
  }
  return signal;
}


int main() {
  std::vector<int> signal = load_signal("/home/guo/AwareCore/BCGGongzhuang/data/parsed_context.txt");
  std::string data_dir = "/home/guo/AwareCore/BCGGongzhuang/coeffs/";
  auto bcg = BCGFramework();
  for (auto v : signal) {
    auto ret = bcg.run(v);
    //    std::cout << ret.respiratory_rate<< ',';
    //    std::cout << ret.heart_rate << '\n';
  }
  return 0;
}
*/
