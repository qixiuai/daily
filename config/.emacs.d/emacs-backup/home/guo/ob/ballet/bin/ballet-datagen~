#!/bin/bash

data_dir=/home/guo/data/kaggle/OpenImage2019/
train_images_dir=${data_dir}/raw/train/
valid_images_dir=${data_dir}/raw/validation/
test_images_dir=${data_dir}/test/

train_bbox_path=${data_dir}/challenge-2019-train-detection-bbox.csv
valid_bbox_path=${data_dir}/challenge-2019-validation-detection-bbox.csv
train_anno_path=${data_dir}/challenge-2019-train-detection-human-imagelabels.csv
valid_anno_path=${data_dir}/challenge-2019-validation-detection-human-imagelabels.csv

out_dir=/home/guo/data/kaggle/oid/tfrecords/
train_out_prefix=${out_dir}/train.tfrecord
valid_out_prefix=${out_dir}/valid.tfrecord
test_out_prefix=${out_dir}/test.tfrecord

tf_model_dir=/home/guo/Github/tensorflow_models/research/object_detection/
model_dir=/home/guo/ob/ballet/ballet/
label_map_path=${tf_model_dir}/data/oid_object_detection_challenge_500_label_map.pbtxt

# generate valid dataset
python ${tf_model_dir}/dataset_tools/create_oid_tf_record.py \
       --input_box_annotations_csv=${valid_bbox_path} \
       --input_image_label_annotations_csv=${valid_anno_path} \
       --input_images_directory=${valid_images_dir} \
       --input_label_map=${label_map_path} \
       --output_tf_record_path_prefix=${valid_out_prefix} \
       --num_shards=100



