
package(
    default_visibility = ["//visibility:public"],
)

licenses(["notice"])

cc_library(
    name = "api",
    srcs = ["api.cc", "data.h"],
    hdrs = ["api.h"],
    copts = ["-std=c++17"],
    linkopts = ["-lpthread","-lcrypto", "-lssl", "-lboost_system", "-lcpprest"],
    deps = [":data",
            "//psg/lib:edfplus",
            "//psg/lib:sha256",
            "//psg/event:arousal", "//psg/event:stage", "//psg/event:spo2",
            "//psg/event:leg", "//psg/event:resp", "//psg/event:heart", 
            "//psg/report:leg", "//psg/report:heart", "//psg/report:spo2", "//psg/report:stage",
            "//psg/report:resp", "//psg/report:pose", "//psg/report:chart",
            "@com_google_absl//absl/strings"],
)

cc_library(
    name = "data",
    srcs = ["data.cc"],
    hdrs = ["data.h"],
    copts = ["-std=c++17"],
    deps = ["//third_party/cpprest:cpprest"],
)

cc_test(
    name = "api_test",
    size = "small",
    srcs = ["api_test.cc",],
    copts = ["-std=c++17", "-Iexternal/gtest/include"],
    linkopts = ["-pthread"],
    deps = [":api", "@com_google_absl//absl/strings", "@gtest//:gtest"],
)





