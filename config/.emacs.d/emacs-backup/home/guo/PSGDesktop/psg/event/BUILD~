
package(
    default_visibility = ["//visibility:public"],
)

licenses(["notice"])

cc_library(
    name = "events",
    hdrs = ["events.h"],
    copts = ["-std=c++17"],
    deps = [":arousal", ":heart", ":leg", ":resp", ":spo2", ":stage"],
)

cc_library(
    name  = "arousal",
    srcs  = ["arousal.cc"],
    hdrs  = ["arousal.h"],
    copts = ["-std=c++17"],
    deps  = ["//psg/util:utils"],
)

cc_library(
    name = "heart",
    srcs = ["heart.cc", "heart_peak_detector.cc", "heart_peak_detector.h"],
    hdrs = ["heart.h"],
    copts = ["-std=c++17"],
    deps  = ["//psg/util:utils"],    
)

cc_library(
    name = "leg",
    srcs = ["leg.cc"],
    hdrs = ["leg.h"],
    copts = ["-std=c++17"],
    deps  = ["//psg/util:utils"],    
)

cc_library(
    name = "resp",
    srcs = ["resp.cc"],
    hdrs = ["resp.h"],
    copts = ["-std=c++17"],
    deps  = ["//psg/util:utils", ":heart"],    
)

cc_library(
    name = "spo2",
    srcs = ["spo2.cc"],
    hdrs = ["spo2.h"],
    copts = ["-std=c++17"],
    deps  = ["//psg/util:utils",
             "@com_google_absl//absl/strings",
             "//third_party:boost"
    ], 
)

cc_binary(
    name = "spo2_test",
    srcs = ["spo2_test.cc"],
    copts = ["-std=c++17"],
    deps  = ["//psg/util:utils", ":spo2"],
)

cc_library(
    name = "stage",
    srcs = ["stage.cc"],
    hdrs = ["stage.h"],
    copts = ["-std=c++17"],
    deps  = ["//psg/util:utils"],    
)
