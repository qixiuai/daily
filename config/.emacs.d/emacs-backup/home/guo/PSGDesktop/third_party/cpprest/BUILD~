
package(
    default_visibility = ["//visibility:public"],
)

licenses(["notice"])

cc_library(
    name = "cpprest",
    hdrs = glob(["include/**/*.h"]),
    includes = ["include"],
    linkopts = select({
        "@bazel_tools//src/conditions:windows" : [],
        "//conditions:default" : ["-lpthread"],
    }),
    deps = select({
        "@bazel_tools//src/conditions:windows" : ["cpprest_win"],
        "//conditions:default" : [":cpprest_linux"],
    }) + ["//third_party/pplx:pplx", "//third_party/boost:boost"],
)

cc_import(
    name = "cpprest_linux",
    shared_library = "lib/libcpprest.so",
)

cc_import(
    name = "cpprest_win",
    shared_library = "lib/cpprest_2_10.dll",
    interface_library = "lib/cpprest_2_10.lib",
)
